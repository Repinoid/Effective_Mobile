Допущения<hr>

1. ID пользователя в формате UUID - надо проверять на соответствие<br>
2. Комбинация user_id & service_name уникальна. Один user_id может подписаться на service_name один раз, если надо ещё - через UPDATE<br>
3. CRUDL. <br>
<br>
POST **/add**  -  добавить в таблицу запись о подписке<br>
POST **/read** -  Выдаёт список запросов<br>
В запросе обязательны только user_id & service_name, наличие остальных параметров (дат) выступает как маска start_date <= дата <= end_date <br>
PUT **/update**  -  обязательны user_id & service_name, остальное - обновляет запись<br>
DELETE **/delete**  -  поля в JSON запроса - маска. Скажем, если JSON пустой - удалит ***всё***<br><br>
GET **/list**  - вернёт список  всех подписок<br>
POST **/sum** - суммарная стоимость подписок, фильтрация по названию и/или user_id и диапазону дат <br>
<hr>

Код писался параллельно с тестами, *github.com/stretchr/testify/suite*<br>
База для тестов поднимается *github.com/testcontainers/testcontainers-go*<br>

***go test ./internal/dbase*** тест функций БД<br>
***go test ./internal/handlera*** тест HTTP хандлеров БД<br>

Для интеграционных тестов необходимо собрать проект и запустить сервис <br>
***docker compose build --no-cache && docker compose up -d***<br>
или просто запустить<br>
***docker compose up -d***<br>

***go test ./cmd/app -count=1***<br>

Третьим контейнером запускается ***PgAdmin***, ***PgBouncer*** не стал подключать<br>

Можно ещё и CD github actions внедрить, шаблон есть из другого проекта<br>

```
Тестовое задание Junior Golang Developer
Effective Mobile
Задача: спроектировать и реализовать REST-сервис для агрегации данных об
онлайн-подписках пользователей.
Требования:
1. Выставить HTTP-ручки для CRUDL-операций над записями о подписках. Каждая запись
содержит:
1. Название сервиса, предоставляющего подписку
2. Стоимость месячной подписки в рублях
3. ID пользователя в формате UUID
4. Дата начала подписки (месяц и год)
5. Опционально дата окончания подписки
2. Выставить HTTP-ручку для подсчета суммарной стоимости всех подписок за выбранный
период с фильтрацией по id пользователя и названию подписки
3. СУБД – PostgreSQL. Должны быть миграции для инициализации базы данных
4. Покрыть код логами
5. Вынести конфигурационные данные в .env/.yaml-файл
6. Предоставить swagger-документацию к реализованному API
7. Запуск сервиса с помощью docker compose
Примечания:
1. Проверка существования пользователя не требуется. Управление пользователями вне
зоны ответственности вашего сервиса
2. Стоимость любой подписки – целое число рублей, копейки не учитываются
Пример тела запроса на создание записи о подписке:

{
“service_name”: “Yandex Plus”,
“price”: 400,
“user_id”: “60601fee-2bf1-4721-ae6f-7636e79a0cba”,
“start_date”: “07-2025”
}
```





